---
import Html from "@shared/Html.astro";
import Head from "@site/Head.astro";
import Header from "@site/Header.astro";
import FeedItem from "@site/FeedItem.astro";

const all = await Astro.glob("./**/*.md");
const pub = all.filter(
  ({ frontmatter: { draft, pubDate } }) =>
    pubDate && (import.meta.env.DEV || !draft)
);
pub.sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).getTime() -
    new Date(a.frontmatter.pubDate).getTime()
);
---

<Html>
  <Head
    slot="head"
    title="vibing.dev"
    description="Outlet for whatever I'm vibing. Mostly web dev."
  />
  <Header />
  <main class="sm:px-4 md:px-8 pb-24">
    <ul class="mx-auto max-w-prose divide-y divide-gray-4">
      {pub.map((i) => <FeedItem {...i} />)}
    </ul>
  </main>
</Html>
