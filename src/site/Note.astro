---
import Html from "@shared/Html.astro";
import Head from "./Head.astro";
import Header from "./Header.astro";
import { format } from "date-fns";
const {
  frontmatter: { title, description, minutesRead, pubDate, draft },
} = Astro.props;
const unpub = draft || !pubDate;
---

<Html>
  <Head
    slot="head"
    title={title}
    description={description}
    ogType="article"
    noindex={unpub}
  />
  <Header />
  <main class="flex-1 px-4">
    <article class="mx-auto max-w-prose prose pb-24">
      <h1 class="text-indigo-10">{title}</h1>
      <div class="flex -mt-7 space-x-4 text-sm">
        {
          pubDate && (
            <strong>{format(new Date(pubDate), "do MMM, yyyy")}</strong>
          )
        }
        <div class="inline-flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-4 h-4 mr-1"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>

          {minutesRead}
        </div>
      </div>
      <hr class="!mt-2" />
      {
        unpub && (
          <blockquote class="lead">
            <p>
              What follows is a <strong>draft!</strong> I don't consider it
              ready for public consumption. It likely contains half-formed ideas
              or statements that are flat out wrong.
            </p>
          </blockquote>
        )
      }
      <slot />
      <hr class="!mb-4" />
      <div class="flex justify-between items-center">
        <a class="inline-flex items-center" href="/">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-5 h-5 mr-1"
          >
            <path
              d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"
            ></path>
            <path
              d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"
            ></path>
          </svg>
          Home
        </a>
        <a
          class="inline-flex items-center"
          href={`mailto:feedback@vibing.dev?subject=${encodeURIComponent(
            "Feedback - " + title
          )}`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-5 h-5 mr-1"
            aria-hidden="true"
          >
            <path
              d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z"
            ></path>
            <path
              d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z"
            ></path>
          </svg>
          Reply
        </a>
        <a
          class="inline-flex items-center"
          href="https://github.com/mrmcc3/vibing-dev/issues"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-5 h-5 mr-1"
            aria-hidden="true"
          >
            <path
              fill-rule="evenodd"
              d="M12 6.75a5.25 5.25 0 016.775-5.025.75.75 0 01.313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 011.248.313 5.25 5.25 0 01-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 112.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0112 6.75zM4.117 19.125a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75h-.008a.75.75 0 01-.75-.75v-.008z"
              clip-rule="evenodd"></path>
          </svg>
          Feedback</a
        >
      </div>
    </article>
  </main>
</Html>
