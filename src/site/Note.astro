---
import Html from "@shared/Html.astro";
import Head from "./Head.astro";
import Header from "./header/Header.astro";
import Footer from "./footer/Footer.astro";
import { format } from "date-fns";
const {
  frontmatter: { title, description, minutesRead, pubDate, draft },
} = Astro.props;
const unpub = draft || !pubDate;
---

<Html>
  <Head
    slot="head"
    title={title}
    description={description}
    ogType="article"
    noindex={unpub}
  />
  <Header />
  <main class="flex-1 px-4">
    <article class="mx-auto max-w-prose prose">
      <h1 class="text-indigo-10">{title}</h1>
      <div class="flex -mt-7 space-x-4 text-sm">
        {
          pubDate && (
            <strong>{format(new Date(pubDate), "do MMM, yyyy")}</strong>
          )
        }
        <div class="inline-flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-4 h-4 mr-1"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>

          {minutesRead}
        </div>
      </div>
      {
        unpub && (
          <blockquote class="lead">
            <p>
              What follows is a <strong>draft!</strong> I don't consider it
              ready for public consumption. It likely contains half-formed ideas
              or statements that are flat out wrong.
            </p>
          </blockquote>
        )
      }
      <slot />
    </article>
  </main>
  <Footer />
</Html>
