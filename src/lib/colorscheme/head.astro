<meta name="color-scheme" content="light dark" />
<script is:inline>
  const pref = globalThis.matchMedia("(prefers-color-scheme: dark)");
  const html = document.documentElement.classList;
  const applyColorScheme = () => {
    const cs = localStorage.colorScheme;
    cs === "dark" || (cs !== "light" && pref.matches)
      ? html.add("dark")
      : html.remove("dark");
    document
      .querySelector('meta[name="color-scheme"]')
      ?.setAttribute("content", cs || "light dark");
  };
  applyColorScheme();
  pref.addEventListener("change", applyColorScheme);
  Object.assign(globalThis, { applyColorScheme });
</script>
